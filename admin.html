<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Royal Point · Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Loading Overlay -->
  <script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <!-- ใช้ธีมเดียวกับหน้า user -->
  <link rel="stylesheet" href="/style.css" />

  <style>
    /* เพิ่มสไตล์เฉพาะ admin เล็กน้อย */
    .admin-shell{max-width:900px; margin:0 auto; padding-bottom:120px}
    .admin-header{
      background: linear-gradient(135deg, rgba(45,212,191,.25), rgba(96,165,250,.15));
      border:1px solid rgba(255,255,255,.08);
      border-radius: 22px;
      padding:16px;
      box-shadow: var(--shadow);
    }
    .admin-title{font-weight:900; font-size:20px}
    .searchbar{background: var(--card); border:1px solid var(--border); border-radius:12px; padding:10px 12px}
    .table-card{background: var(--card); border:1px solid var(--border); border-radius:16px; overflow:hidden}
    table thead th{position:sticky; top:0; background: rgba(10,14,20,.8); backdrop-filter: blur(6px); z-index:1}
    .btn-soft{
      background:transparent; border:1px solid rgba(255,255,255,.12); color:#dbe5ff; border-radius:10px;
    }
    .score-chip{
      font-weight:800; padding:2px 10px; border-radius:999px; background:rgba(45,212,191,.12); border:1px solid rgba(45,212,191,.25);
    }
    .row-actions .btn{padding:6px 10px}
    .muted{color:var(--muted)}
  </style>
</head>

<body>
  <div class="container admin-shell">

    <!-- Header -->
    <div class="admin-header d-flex align-items-center gap-3 mt-3">
      <div class="flex-grow-1">
        <div class="admin-title"><i class="fa-solid fa-shield-halved me-2"></i>Royal Point — Admin</div>
        <div class="muted small">จัดการผู้ใช้ · ปรับ/ลบคะแนน · ดูประวัติ</div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <img id="adminAvatar" src="https://placehold.co/36x36" class="rounded-circle" style="width:36px;height:36px;border:1px solid rgba(255,255,255,.25)" />
        <div class="small">
          <div id="adminName" class="fw-bold">—</div>
          <div class="muted" id="adminUid">UID: —</div>
        </div>
        <a href="/" class="btn btn-soft ms-2"><i class="fa-solid fa-house"></i></a>
        <button id="btnLogout" class="btn btn-soft"><i class="fa-solid fa-right-from-brain"></i></button>
      </div>
    </div>

    <!-- Search / Tools -->
    <div class="searchbar d-flex align-items-center gap-2 mt-3">
      <i class="fa-solid fa-magnifying-glass muted"></i>
      <input id="txtSearch" type="text" class="form-control border-0 bg-transparent text-white" placeholder="ค้นหา ชื่อ หรือ UID..." />
      <button id="btnReload" class="btn btn-primary btn-icon"><i class="fa-solid fa-rotate"></i> โหลดใหม่</button>
    </div>

    <!-- Table -->
    <div class="table-card mt-3">
      <div class="table-responsive">
        <table class="table table-dark table-hover align-middle mb-0">
          <thead>
            <tr>
              <th style="width:22%">ชื่อ</th>
              <th style="width:34%">UID</th>
              <th style="width:12%" class="text-end">คะแนน</th>
              <th style="width:32%" class="text-end">จัดการ</th>
            </tr>
          </thead>
          <tbody id="tbodyUsers">
            <!-- render by admin.js -->
          </tbody>
        </table>
      </div>
    </div>

  </div><!--/container-->

  <!-- Modal: History -->
  <div class="modal fade" id="historyModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title"><i class="fa-regular fa-clock me-2"></i>ประวัติคะแนน · <span id="historyUser"></span></h6>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div id="historyList" class="list-group"></div>
      </div>
    </div>
  </div>
</div>

  <!-- Admin App -->
  <script src="/admin.js"></script>
</body>
</html>
